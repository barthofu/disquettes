<div class="overview">

    <section class="badges">
        <a href="" class="badge">
            <div>
                <h2>Disquettes</h2>
                <h3><%= stats.totalValidate %></h3>
            </div>
        </a>
        <a href="/admin/waiting" class="badge">
            <div>
                <h2>En attente</h2>
                <h3><%= stats.totalWaiting %></h3>
            </div>
        </a>
        <a href="" class="badge">
            <div>
                <h2>Tags</h2>
                <h3><%= stats.totalTags %></h3>
            </div>
        </a>
        <a href="" class="badge">
            <div>
                <h2>Temps de validation moyen</h2>
                <h3>00:00:00</h3>
            </div>
        </a>
    </section>

    <section class="graph">
        <canvas id="canvas" style="height: 300px; width: 450px"></canvas>
    </section>


        
</div>

<script>



var config = {
    
    type: 'line',
    data: {
        labels: <%- JSON.stringify([...new Set(stats.requests.visites)]) %>,
        datasets: [{
            label: 'Visites',
            backgroundColor: "#FF0000",
            borderColor:  "#FF0000",
            data: <%- JSON.stringify([...new Set(stats.requests.visites)].map(e => stats.requests.visites.filter(e2 => e2 === e).length)) %>,
            fill: false,
        }, {
            label: 'API Requests',
            fill: false,
            backgroundColor: "#FCBA03",
            borderColor: "#FCBA03",
            data: <%- JSON.stringify([...new Set(stats.requests.api)].map(e => stats.requests.api.filter(e2 => e2 === e).length)) %>
        }
        ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            title: {
                display: true,
                text: 'Visites et RequÃªtes sur l\'API'
            },
            tooltips: {
                mode: 'index',
                intersect: false,
            },
            hover: {
                mode: 'nearest',
                intersect: true
            },
            scales: {
                xAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Day'
                    }
                }],
                yAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Value'
                    }
                }]
            }
        }
    };


    window.onload = function() {
			var ctx = document.getElementById('canvas').getContext('2d');
			window.myLine = new Chart(ctx, config);
	};

</script>